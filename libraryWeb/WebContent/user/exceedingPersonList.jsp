<%@ page import="java.util.ArrayList"%><%@ page import=" java.util.Calendar"%><%@ page import=" java.util.Date"%><%@ page import=" java.lang.Comparable "%><%@ page import="java.text.SimpleDateFormat"%><%@ page import="user.userBean.UserProcessBean"%><%@ page import="book.bookBean.BookProcessBean"%><%@ page import="common.Cnst"%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><jsp:useBean id="mng_user_info" scope="session" class="manage.manageLogBean.LoginUserBean" /><!DOCTYPE html><html><head><title>超過者リスト</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/libraryWeb/css/bootstrap.min.css"><link href="/libraryWeb/css/library.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" href="/libraryWeb/css/drawer.min.css"><link rel="stylesheet" type="text/css" href="/libraryWeb/css/dataTables.bootstrap.min.css" /><script src="/libraryWeb/js/jquery-3.1.0.min.js"></script><script src="/libraryWeb/js/drawer.min.js"></script><script src="/libraryWeb/js/iscroll.js"></script><script type="text/javascript" src="/libraryWeb/js/jquery.dataTables.min.js"></script><script type="text/javascript" src="/libraryWeb/js/dataTables.bootstrap.min.js"></script></head><body class="drawer drawer--left"> <div class="container-fluid">  <jsp:include page="/common/responseUserMenu.jsp" />  <jsp:include page="/common/header.jsp" />  <div class="management-toggle">   <a href="ManagementMenu?submit=図書一覧"><button class="btn btn-primary" style="float: none">←図書管理へ</button></a>  </div>  <h4 class="head-margin">超過者リスト</h4>  <jsp:include page="/common/userMenu.jsp" />  <%    @SuppressWarnings("unchecked")  ArrayList<UserProcessBean> userList = (ArrayList<UserProcessBean>) request.getAttribute(Cnst.ATTR_USER_BEAN.strType());  %>  <%    @SuppressWarnings("unchecked")  ArrayList<BookProcessBean> bookList = (ArrayList<BookProcessBean>) request.getAttribute(Cnst.ATTR_BOOK_BEAN.strType());  %>  <%    Calendar c = Calendar.getInstance();  %>  <%    SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd/");  %>  <%    String now = sdf.format(c.getTime());  String nowStr = now.substring(0, 4);  nowStr += now.substring(5, 7);  nowStr += now.substring(8, 10);  int nowInt = Integer.parseInt(nowStr);  int j = 0;  %>  <%--bookListに超過者がいなければTRUE --%>  <%    if (bookList.size() == 0) {  %>  <p>超過者はいません</p>  <%    } else {  %>  <div class="table-responsive">   <table class="table table-condensed display" id="table-sort">    <thead>     <tr>      <th>ID</th>      <th>タイトル</th>      <th>ユーザID</th>      <th>名前</th>      <th>貸し出し日</th>      <th>返却日</th>     </tr>    </thead>    <tbody>     <%for (int i = 0; i < bookList.size(); i++) {       BookProcessBean bookBean = (BookProcessBean) bookList.get(i);       String returnDate = bookBean.getReturnDate();       String returnDateStr = returnDate.substring(0, 4);       returnDateStr += returnDate.substring(5, 7);       returnDateStr += returnDate.substring(8, 10);       int returnDateInt = Integer.parseInt(returnDateStr);       if (nowInt > returnDateInt) {         UserProcessBean userBean = (UserProcessBean) userList.get(i);     %>     <tr>      <td><%=bookBean.getBookId()%></td>      <td><%=bookBean.getTitle()%></td>      <td><%=userBean.getUserId()%></td>      <td><%=userBean.getUserName()%></td>      <td><%=bookBean.getLendingDate()%></td>      <td><%=bookBean.getReturnDate()%></td>     </tr>     <% j++;     %>     <% }}     %>    <tbody>   </table>  </div>  <%    }  %> </div> <script> $(document).ready(function() {  $(".drawer").drawer();  $.extend($.fn.dataTable.defaults, {   language : {    url : "http://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Japanese.json"   }  });  $("#table-sort").dataTable(); }); $(window).on('load resize', function() {  var w = $(window).width();  var x = 768;  if (w < x) {   //画面サイズが768px未満のときの処理   $(".management-toggle").css("float", "right");   $("#loginNow").hide();   $(".menu").hide();   $("button.drawer-toggle.drawer-hamburger").show();  } else {   //それ以外のときの処理   $("#loginNow").show();   $(".menu").show();   $("button.drawer-toggle.drawer-hamburger").hide();  } });</script></body></html>