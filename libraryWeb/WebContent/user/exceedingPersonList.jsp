<%@ page import="java.util.ArrayList"%><%@ page import="java.util.Map"%><%@ page import="user.userBean.UserProcessBean"%><%@ page import="common.Cnst"%><%@ page import="commonJson.JsonUtil"%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><jsp:useBean id="mng_user_info" scope="session" class="manage.manageBean.ManageProcessBean" /><!DOCTYPE html><html><head><title>ユーザ一覧</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//cdn.datatables.net/plug-ins/1.10.16/integration/font-awesome/dataTables.fontAwesome.css"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"><link rel="stylesheet" href="/libraryWeb/css/bootstrap.min.css"><link rel="stylesheet" href="/libraryWeb/css/dataTables.bootstrap.min.css"><link rel="stylesheet" href="/libraryWeb/css/library.css"><link rel="stylesheet" href="/libraryWeb/css/drawer.min.css"><script src="/libraryWeb/js/jquery-3.1.0.min.js"></script><script src="/libraryWeb/js/drawer.min.js"></script><script src="/libraryWeb/js/iscroll.js"></script><script type="text/javascript" src="/libraryWeb/js/jquery.dataTables.min.js"></script><script type="text/javascript" src="/libraryWeb/js/dataTables.bootstrap.min.js"></script><script type="text/javascript" src="/libraryWeb/js/bootstrap.min.js"></script><script type="text/javascript" src="/libraryWeb/js/library.js"></script></head><body class="drawer drawer--left"> <div class="container-fluid">  <jsp:include page="/common/responseUserMenu.jsp" />  <jsp:include page="/common/header.jsp" />  <div class="management-toggle">   <a href="ManagementMenu?submit=図書一覧">    <button class="btn btn-primary" style="float: none;">←図書管理へ</button>   </a>  </div>  <% @SuppressWarnings("unchecked")  ArrayList<UserProcessBean> userList = (ArrayList<UserProcessBean>) request.getAttribute(Cnst.ATTR_USER_BEAN.strType());  ArrayList<Map<String, Object>> bookList = (ArrayList<Map<String, Object>>) request.getAttribute(Cnst.ATTR_BOOK_BEAN.strType());  JsonUtil j = new JsonUtil();  String displayInfo = (String) request.getAttribute(Cnst.ATTR_DISPLAY_INFO.strType());  %>  <h4 class="head-margin"></h4>  <jsp:include page="/common/userMenu.jsp" />  <form id="frm-example" action="" method="get">   <table id=user class="display table table-condensed" cellspacing="0" width="100%">    <thead>     <tr>      <th><input name="select_all" value="1" id="example-select-all" type="checkbox" /></th>      <th>ID</th>      <th>名前</th>      <th>住所</th>      <th>性別</th>      <th>年齢</th>     </tr>    </thead>    <tfoot id="last-tr">     <tr>      <th></th>      <th>ID</th>      <th>名前</th>      <th>住所</th>      <th>性別</th>      <th>年齢</th>     </tr>    </tfoot>   </table>  </form> </div> <script> // jspからjson形式のユーザ情報,図書情報を取得 var jsonUser = <%=j.convert(userList)%>; var jsonBook = <%=j.convert(bookList)%>; console.log((jsonBook)); // 画面表示情報 var displayInfo = '<%= displayInfo %>'; // セッションに画面表示情報を格納 window.sessionStorage.setItem('displayInfo', displayInfo); // tableのDOM要素 var table = null; // ユーザ情報格納用 var userInfoJson = ""; $(document).ready(function (){   // テーブル日本語化   dataTablesLanguage();   // 画面情報により表示する情報を分ける。   if(displayInfo === 'lending_excess_person_list_display'){     // テーブルにユーザリスト情報を表示する     table = LendingExcessPersonListdataTablesShow(jsonUser);     tableRelatedFunctionCall(table, jsonBook, displayInfo);     // チェックオール押下処理をする     LendingExcessModalCheckAcquisition();     } }); // リスト毎のチェックボックス押下処理をする LendingExcessModalCheckRowList(); userActiveDisplayChange(); // ハンバーガーメニュー表示 dataTablesMenu(); // デスクトップ、モバイル画面用のメニューの表示 responsive(); $(function () {   $('[data-toggle="popover"]').popover(); }); </script> <!-- モーダル・ダイアログ --> <div class="modal fade" id="sampleModal" tabindex="-1">  <div class="modal-dialog">   <div class="modal-content">    <div class="modal-header">     <button type="button" class="close" data-dismiss="modal">      <span>×</span>     </button>     <h4 class="modal-title">遅延図書返却</h4>    </div>    <form id="bulk-return-modal" action="./UserProcess" method="get">     <div class="modal-body">      <p name="delay-name">さんの遅延中図書</p>      <table id="modal-table" class="table">       <thead>        <tr>         <th><input id="check-all"type="checkbox" /></th>         <th><label>図書ID</label></th>         <th><label>タイトル</label></th>         <th><label>貸出日</label></th>         <th><label>返却日</label></th>        </tr>       </thead>       <tbody></tbody>      </table>     </div>     <div class="modal-footer">      <button type="button" class="btn btn-default" data-dismiss="modal">キャンセル</button>      <button type="submit" name="submit"id="bulk-return-submit" class="btn btn-primary" value="返却決定">決定</button>      <input type="hidden" name="user_id" />      <input type="hidden" name="book_id" />     </div>    </form>   </div>  </div> </div></body></html>