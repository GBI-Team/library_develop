<%@ page import="java.util.ArrayList"%><%@ page import="common.CommonBean"%><%@ page import="common.Cnst"%><%@ page import="commonJson.JsonUtil"%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><jsp:useBean id="mng_user_info" scope="session" class="manage.manageLogBean.LoginUserBean" /><!DOCTYPE html><html><head><title>貸し出し中リスト</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//cdn.datatables.net/plug-ins/1.10.16/integration/font-awesome/dataTables.fontAwesome.css"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"><link rel="stylesheet" href="/libraryWeb/css/bootstrap.min.css"><link rel="stylesheet" href="/libraryWeb/css/dataTables.bootstrap.min.css"><link rel="stylesheet" href="/libraryWeb/css/library.css"><link rel="stylesheet" href="/libraryWeb/css/drawer.min.css"><script src="/libraryWeb/js/jquery-3.1.0.min.js"></script><script src="/libraryWeb/js/drawer.min.js"></script><script src="/libraryWeb/js/iscroll.js"></script><script type="text/javascript" src="/libraryWeb/js/jquery.dataTables.min.js"></script><script type="text/javascript" src="/libraryWeb/js/dataTables.bootstrap.min.js"></script><script type="text/javascript" src="/libraryWeb/js/bootstrap.min.js"></script><script type="text/javascript" src="/libraryWeb/js/library.js"></script></head><body class="drawer drawer--left"> <div class="container-fluid">  <jsp:include page="/common/responseBookMenu.jsp" />  <jsp:include page="/common/header.jsp" />  <div class="management-toggle">   <a href="ManagementMenu?submit=ユーザ一覧">    <button class="btn btn-primary" style="float: none">← ユーザ管理へ</button>   </a>  </div>  <%    @SuppressWarnings("unchecked")  ArrayList<CommonBean> lendingList = (ArrayList<CommonBean>) request.getAttribute(Cnst.ATTR_COMMON_BEAN.strType());  JsonUtil j = new JsonUtil();  String displayInfo = (String) request.getAttribute(Cnst.ATTR_DISPLAY_INFO.strType());  %>  <h4 class="head-margin"></h4>  <jsp:include page="/common/bookMenu.jsp" />  <form id="frm-example" action="" method="get">   <table id="lending" class="display table table-condensed" cellspacing="0" width="100%">    <thead>     <tr>      <th>図書ID</th>      <th>タイトル</th>      <th>ユーザID</th>      <th>名前</th>      <th>貸出日</th>      <th>返却日</th>     </tr>    </thead>    <tfoot id="last-tr">     <tr>      <th>図書ID</th>      <th>タイトル</th>      <th>ユーザID</th>      <th>名前</th>      <th>貸出日</th>      <th>返却日</th>     </tr>    </tfoot>   </table>  </form> </div> <script> // jspからjson形式の図書情報を取得 var lendingInfoJson = <%=j.convert(lendingList)%>;console.log(lendingInfoJson[0]['bookId']); // 画面表示情報 var displayInfo = '<%=displayInfo%>'; // セッションに画面表示情報を格納 window.sessionStorage.setItem('displayInfo', displayInfo); // tableのDOM要素 var table = null; $(document).ready(function (){   // テーブル日本語化   dataTablesLanguage();   // 画面情報により表示する情報を分ける。   // 貸出中一覧画面の場合   if(displayInfo === 'lending_within_display'){     // テーブルに貸出中の情報を表示する     table = lendingListdataTablesShow(lendingInfoJson);     // テーブル関連の処理呼び出し     tableRelatedFunctionCall(table, displayInfo);     } }); bookActiveDisplayChange(); // ハンバーガーメニュー表示 dataTablesMenu(); // デスクトップ、モバイル画面用のメニューの表示 responsive(); $(function () {   $('[data-toggle="popover"]').popover(); });</script> <!-- モーダル・ダイアログ --> <div class="modal fade" id="sampleModal" tabindex="-1">  <div class="modal-dialog">   <div class="modal-content">    <div class="modal-header">     <button type="button" class="close" data-dismiss="modal">      <span>×</span>     </button>     <h4 class="modal-title">返却確認</h4>    </div>    <form id="lend-modal" action="./BookProcess" method="get">     <div class="modal-body">本文</div>     <div class="modal-footer">      <button type="button" class="btn btn-default" data-dismiss="modal">キャンセル</button>      <button type="submit" name="submit" class="btn btn-primary" value="返却決定">決定</button>      <input type="hidden" name="user_id" />      <input type="hidden" name="book_id" />     </div>    </form>   </div>  </div> </div></body></html>