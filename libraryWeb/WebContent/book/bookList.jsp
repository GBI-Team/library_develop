<%@ page import="java.util.ArrayList"%><%@ page import="book.bookBean.BookProcessBean"%><%@ page import="common.Cnst"%><%@ page import="commonJson.JsonUtil"%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><jsp:useBean id="mng_user_info" scope="session" class="manage.manageBean.ManageProcessBean" /><!DOCTYPE html><html><head><title>ブックリスト</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//cdn.datatables.net/plug-ins/1.10.16/integration/font-awesome/dataTables.fontAwesome.css"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"><link rel="stylesheet" href="/libraryWeb/css/bootstrap.min.css"><link rel="stylesheet" href="/libraryWeb/css/dataTables.bootstrap.min.css"><link rel="stylesheet" href="/libraryWeb/css/library.css"><link rel="stylesheet" href="/libraryWeb/css/drawer.min.css"><script src="/libraryWeb/js/jquery-3.1.0.min.js"></script><script src="/libraryWeb/js/drawer.min.js"></script><script src="/libraryWeb/js/iscroll.js"></script><script type="text/javascript" src="/libraryWeb/js/jquery.dataTables.min.js"></script><script type="text/javascript" src="/libraryWeb/js/dataTables.bootstrap.min.js"></script><script type="text/javascript" src="/libraryWeb/js/bootstrap.min.js"></script><script type="text/javascript" src="/libraryWeb/js/library.js"></script></head><body class="drawer drawer--left"> <div class="container-fluid">  <jsp:include page="/common/responseBookMenu.jsp" />  <jsp:include page="/common/header.jsp" />  <div class="management-toggle">   <a href="ManagementMenu?submit=ユーザ一覧">    <button class="btn btn-primary" style="float: none">← ユーザ管理へ</button>   </a>  </div>  <% @SuppressWarnings("unchecked")  ArrayList<BookProcessBean> bookList = (ArrayList<BookProcessBean>) request.getAttribute(Cnst.ATTR_BOOK_BEAN.strType());  JsonUtil j = new JsonUtil();  String displayInfo = (String) request.getAttribute(Cnst.ATTR_DISPLAY_INFO.strType());  %>  <h4 class="head-margin"></h4>  <jsp:include page="/common/bookMenu.jsp" />  <form id="frm-example" action="" method="get">   <table id="book" class="display table table-condensed" cellspacing="0" width="100%">    <thead>     <tr>      <th><input name="select_all" value="1" id="example-select-all" type="checkbox" /></th>      <th>ID</th>      <th>タイトル</th>      <th>著者</th>      <th>出版者</th>      <th>出版年</th>      <th>登録日</th>     </tr>    </thead>    <tfoot id="last-tr">     <tr>      <th></th>      <th>ID</th>      <th>タイトル</th>      <th>著者</th>      <th>出版者</th>      <th>出版年</th>      <th>登録日</th>     </tr>    </tfoot>   </table>  </form> </div> <script> // jspからjson形式の図書情報を取得 var bookInfoJson = <%=j.convert(bookList)%>;console.log(bookInfoJson[0]['bookId']); // 画面表示情報 var displayInfo = '<%= displayInfo %>'; // セッションに画面表示情報を格納 window.sessionStorage.setItem('displayInfo', displayInfo); // tableのDOM要素 var table = null; $(document).ready(function (){   // テーブル日本語化   dataTablesLanguage();   // 画面情報により表示する情報を分ける。   // 図書一覧画面の場合   if(displayInfo === 'list_only_display'){     // テーブルに図書情報を表示する     table = bookListdataTablesShow(bookInfoJson);     // テーブル関連の処理呼び出し     tableRelatedFunctionCall(table, null, displayInfo);     }   // 図書削除画面の場合   if(displayInfo === 'delete_display'){     // テーブルに削除する図書情報を表示する     table = deleteBookListdataTablesShow(bookInfoJson);     dataTableBookCheckAcquisition(table);     // チェック数が1つでもあれば削除確認ボタンを表示     checkIsCntBtnShow(table);     // 削除確認画面遷移     CheckedBookInformation();     }   // 図書貸出画面の場合   if(displayInfo === 'lend_display'){     console.log('displayInfo:'+displayInfo);     // テーブルに貸し出す図書情報を表示する     table = deleteBookListdataTablesShow(bookInfoJson);     dataTableBookCheckAcquisition(table);     // チェック数が1つでもあれば貸出確認ボタンを表示     checkIsCntLendBtnShow(table);     // 貸出確認画面遷移     CheckedLendBookInformation();     } }); bookActiveDisplayChange(); // ハンバーガーメニュー表示 dataTablesMenu(); // デスクトップ、モバイル画面用のメニューの表示 responsive(); $(function () {   $('[data-toggle="popover"]').popover(); });</script> <!-- モーダル・ダイアログ --> <div class="modal fade" id="sampleModal" tabindex="-1">  <div class="modal-dialog">   <div class="modal-content">    <div class="modal-header">     <button type="button" class="close" data-dismiss="modal">      <span>×</span>     </button>     <h4 class="modal-title">詳細</h4>    </div>    <div class="modal-body">本文</div>    <div class="modal-footer">     <button type="button" class="btn btn-primary">編集</button>     <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>    </div>   </div>  </div> </div></body></html>